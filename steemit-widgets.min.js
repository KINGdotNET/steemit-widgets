/**
 * Steemit Widgets
 *
 * @author mkt <kontakt@markus-kottlaender.de>
 * @license MIT
 */
var steemitWidgets={};steemitWidgets.updateIntervals=[],steemitWidgets.profile=function(e){function t(){steem.api.getAccounts([i.user],function(e,t){if(!e&&t.length){var t=t[0],n=JSON.parse(t.json_metadata).profile;steem.api.getFollowCount(i.user,function(e,l){var r=steemitWidgets.getTemplate(i.template).replace(/\${USER}/gi,t.name).replace(/\${NAME}/gi,n.name).replace(/\${LOCATION}/gi,n.location).replace(/\${WEBSITE}/gi,n.website).replace(/\${IMAGE}/gi,n.profile_image).replace(/\${COVERIMAGE}/gi,n.cover_image).replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(t.reputation,i.reputationPrecision)).replace(/\${VOTINGPOWER}/gi,steemitWidgets.calculateVotingPower(t.voting_power,t.last_vote_time,i.votingPowerPrecision)).replace(/\${FOLLOWERS}/gi,l.follower_count).replace(/\${FOLLOWING}/gi,l.following_count).replace(/\${POSTCOUNT}/gi,t.post_count).replace(/\${ABOUT}/gi,n.about);a.innerHTML=r})}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,user:"mkt",template:'<img width="100" src="${IMAGE}" /><br><a href="https://steemit.com/@${USER}">@${USER}</a>',reputationPrecision:0,votingPowerPrecision:2,updateInterval:60},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.blog=function(e){function t(){steem.api.getDiscussionsByBlog({tag:i.user,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",l=0;l<t.length;l++){var r=JSON.parse(t[l].json_metadata),s=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[l].url).replace(/\${TITLE}/gi,t[l].title).replace(/\${AUTHOR}/gi,t[l].author).replace(/\${RESTEEMED}/gi,t[l].author!=i.user?i.resteemedIndicator:"").replace(/\${RESTEEMEDBY}/gi,t[l].first_reblogged_by?"resteemed by "+t[l].first_reblogged_by:"").replace(/\${DATE}/gi,i.dateCallback(new Date(t[l].created))).replace(/\${IMAGE}/gi,r.image?r.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[l]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[l].children).replace(/\${UPVOTES}/gi,t[l].net_votes).replace(/\${CATEGORY}/gi,t[l].category);n+=s}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,user:"mkt",limit:10,template:'<div><a href="${URL}">${TITLE}</a>${RESTEEMED}<br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",resteemedIndicator:" (resteemed) ",payoutPrecision:2,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.feed=function(e){function t(){steem.api.getDiscussionsByFeed({tag:i.user,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",l=0;l<t.length;l++){var r=JSON.parse(t[l].json_metadata),s=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[l].url).replace(/\${TITLE}/gi,t[l].title).replace(/\${AUTHOR}/gi,t[l].author).replace(/\${RESTEEMED}/gi,t[l].first_reblogged_by?i.resteemedIndicator:"").replace(/\${RESTEEMEDBY}/gi,t[l].first_reblogged_by?"resteemed by "+t[l].first_reblogged_by:"").replace(/\${DATE}/gi,i.dateCallback(new Date(t[l].created))).replace(/\${IMAGE}/gi,r.image?r.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[l]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[l].children).replace(/\${UPVOTES}/gi,t[l].net_votes).replace(/\${CATEGORY}/gi,t[l].category);n+=s}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,user:"mkt",limit:10,template:'<div><a href="${URL}">${TITLE}</a>${RESTEEMED}<br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",resteemedIndicator:" (resteemed) ",payoutPrecision:2,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.new=function(e){function t(){steem.api.getDiscussionsByCreated({tag:i.tag,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",l=0;l<t.length;l++){var r=JSON.parse(t[l].json_metadata),s=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[l].url).replace(/\${TITLE}/gi,t[l].title).replace(/\${AUTHOR}/gi,t[l].author).replace(/\${DATE}/gi,i.dateCallback(new Date(t[l].created))).replace(/\${IMAGE}/gi,r.image?r.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[l]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[l].children).replace(/\${UPVOTES}/gi,t[l].net_votes).replace(/\${CATEGORY}/gi,t[l].category);n+=s}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,tag:null,limit:10,template:'<div><a href="${URL}">${TITLE}</a><br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",payoutPrecision:2,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.hot=function(e){function t(){steem.api.getDiscussionsByHot({tag:i.tag,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",l=0;l<t.length;l++){var r=JSON.parse(t[l].json_metadata),s=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[l].url).replace(/\${TITLE}/gi,t[l].title).replace(/\${AUTHOR}/gi,t[l].author).replace(/\${DATE}/gi,i.dateCallback(new Date(t[l].created))).replace(/\${IMAGE}/gi,r.image?r.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[l]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[l].children).replace(/\${UPVOTES}/gi,t[l].net_votes).replace(/\${CATEGORY}/gi,t[l].category);n+=s}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,tag:null,limit:10,template:'<div><a href="${URL}">${TITLE}</a><br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",payoutPrecision:2,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.trending=function(e){function t(){steem.api.getDiscussionsByTrending({tag:i.tag,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",l=0;l<t.length;l++){var r=JSON.parse(t[l].json_metadata),s=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[l].url).replace(/\${TITLE}/gi,t[l].title).replace(/\${AUTHOR}/gi,t[l].author).replace(/\${DATE}/gi,i.dateCallback(new Date(t[l].created))).replace(/\${IMAGE}/gi,r.image?r.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[l]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[l].children).replace(/\${UPVOTES}/gi,t[l].net_votes).replace(/\${CATEGORY}/gi,t[l].category);n+=s}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,tag:null,limit:10,template:'<div><a href="${URL}">${TITLE}</a><br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",payoutPrecision:2,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.getTemplate=function(e){var t=document.getElementById(e);return t?t.innerHTML:e},steemitWidgets.getPayout=function(e){if("1970-01-01T00:00:00"==e.last_payout){var t=e.pending_payout_value.replace(" SBD","");return parseFloat(t)}var i=e.total_payout_value.replace(" SBD",""),a=e.curator_payout_value.replace(" SBD","");return parseFloat(i)+parseFloat(a)},steemitWidgets.calculateReputation=function(e,t){return(0>e?"-":"")+(9*(Math.log10(Math.abs(e))-9)+25).toFixed(t)},steemitWidgets.calculateVotingPower=function(e,t,i){var a=(new Date-new Date(t+"Z"))/1e3;return e+=1e4*a/432e3,Math.min(e/100,100).toFixed(i)},window.jQuery&&(jQuery.fn.steemitProfile=function(e){steemitWidgets.profile(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitBlog=function(e){steemitWidgets.blog(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitFeed=function(e){steemitWidgets.feed(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitNew=function(e){steemitWidgets.new(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitHot=function(e){steemitWidgets.hot(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitTrending=function(e){steemitWidgets.trending(jQuery.extend({element:this[0]},e))});